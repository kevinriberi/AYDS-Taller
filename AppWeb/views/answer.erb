<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Prelude-Code</title>
  <link rel="stylesheet" href="/css/answer.css">

<script>
  let respuestaEnviada = false; // Variable para rastrear si se envió la respuesta

  const tiempoFinal = new Date().getTime() + 5 * 1000;

  const intervalo = setInterval(function () {
    const ahora = new Date().getTime();
    const tiempoRestante = tiempoFinal - ahora;

    if (!respuestaEnviada) {
      const segundos = Math.floor((tiempoRestante % (1000 * 60)) / 1000);
      const milisegundos = Math.floor((tiempoRestante % 1000) / 100);

      const contadorElemento = document.getElementById('contador');

      if (segundos < 0) {
        clearInterval(intervalo);
        contadorElemento.style.fontSize = '36px';
        contadorElemento.innerHTML = '¡Fuera de tiempo!';
      } else {
        contadorElemento.innerHTML = `
          <p>Tiempo: ${segundos}.${milisegundos}</p>
        `;
      }
    }
  }, 100); // Actualizar cada centésima de segundo

  // Agregar un manejador de eventos al botón "Enviar respuesta"
  const botonEnviar = document.querySelector('.submit-container input[type="submit"]');
  botonEnviar.addEventListener('click', function () {
    respuestaEnviada = true; // Cambiar el estado de respuesta enviada
    clearInterval(intervalo); // Detener el contador cuando se envía la respuesta
    // Hacer acciones relacionadas con el envío de la respuesta
  });
</script>

</head>
<body>

<h1><p><%= @question.content %></p></h1>

<form action="/answers" method="post">
  <input type="hidden" name="question_id" value="<%= @question.id %>">
  <div class="options-container">
    <% @question.options.shuffle.each do |option| %>
      <div>
        <input type="radio" name="option_id" value="<%= option.id %>">
        <label><%= option.content %></label>
      </div>
    <% end %>
  </div>
  <div class="submit-container">
    <input type="submit" value="Enviar respuesta">
  </div>
</form>

  <div id="contador"></div>

</body>
</html>
